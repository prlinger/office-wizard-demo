<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Programme Wizard</title>
  <link rel="stylesheet" type="text/css" href="./semantic/dist/semantic.css">
  
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/reset.css">
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/site.css">

  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/container.css">
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/divider.css">
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/grid.css">
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/header.css">
  <link rel="stylesheet" type="text/css" href="./semantic/dist/components/form.css">


  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
  <script src="./assets/js/jquery-3.3.1.min.js"></script>

  <style type="text/css">
    body > .ui.container {
      margin-top: 3em;
    }
    iframe {
      border: none;
      width: calc(100% + 2em);
      margin: 0em -1em;
      height: 300px;
    }
    iframe html {
      overflow: hidden;
    }
    iframe body {
      padding: 0em;
    }

    .ui.container > h1 {
      font-size: 4em;
      text-align: center;
      font-weight: normal;
    }
    .ui.container > h2.dividing.header {
      font-size: 2em;
      font-weight: normal;
      margin: 4em 0em 3em;
    }
    

    .ui.table {
      table-layout: fixed;
    }
    
    
    .ui.input {
      font-size: 1em;
      text-align: center;
      font-weight: normal;
      margin-top: 1em;
      margin-bottom: 0.5em;
    }
    
    .ui.divider {
      margin-bottom: 0em;
    }
    
    .inline.field.quantity {
      margin-top: 1em;
    }
    
  </style>
</head>
<body>

<div class="ui container">

  <h1 class="black ui header" style="margin-bottom: 1em;">Office Space Calculator</h1>

  
  <!-- <iframe src="components/site.html" width="100%" scrolling="no"></iframe> -->
  <div id="programme_wizard_form" class="ui form">
    
    <!-- OFFICES -->
    
    <h2 class="red ui dividing header">Offices</h2>
    <div class="ui internally celled grid">
      <div class="row ui">
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Executive 20x15</h3>
          <img class="ui fluid centered image" src="./assets/img/Office-Executive20x15.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Large 15x15</h3>
          <img class="ui fluid centered image" src="./assets/img/Office-Large15x15.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Standard 10x15</h3>
          <img class="ui fluid centered image" src="./assets/img/Office-Standard10x15.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Efficient 10x10</h3>
          <img class="ui fluid centered image" src="./assets/img/Office-Efficient10x10.png">
        </div>
        
      </div>
      <div id="office_inputs" class="row">
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="office_executive20x15" type="text" value="0">
            <input class="multiplier" type="hidden" value="300"> <!-- The multiplier is 20x15 = 300 -->
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label"  style="margin-top: 14px;">
            Cost Per Unit:
            <div class="detail">100</div>
            <div class="detail">USD</div>
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label cost_units">
            Cost:
            <div class="detail">0</div>
            <input class="cost_val" type="hidden" value="0">
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label sqft">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="office_large15x15" type="text" value="0">
            <input class="multiplier" type="hidden" value="225">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label"  style="margin-top: 14px;">
            Cost Per Unit:
            <div class="detail">100</div>
            <div class="detail">USD</div>
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label cost_units">
            Cost:
            <div class="detail">0</div>
            <input class="cost_val" type="hidden" value="0">
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label sqft">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="office_standard10x15" type="text" value="0">
            <input class="multiplier" type="hidden" value="150">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label"  style="margin-top: 14px;">
            Cost Per Unit:
            <div class="detail">100</div>
            <div class="detail">USD</div>
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label cost_units">
            Cost:
            <div class="detail">0</div>
            <input class="cost_val" type="hidden" value="0">
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label sqft">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">  
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="office_efficient10x10" type="text" value="0">
            <input class="multiplier" type="hidden" value="100">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label"  style="margin-top: 14px;">
            Cost Per Unit:
            <div class="detail">100</div>
            <div class="detail">USD</div>
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label cost_units">
            Cost:
            <div class="detail">0</div>
            <input class="cost_val" type="hidden" value="0">
          </div>
          <div class="ui hidden divider"></div>
          <div class="red ui label block_label sqft">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
      </div>
    </div>
    
    <div class="ui red segment" style="margin-bottom: 4em;">
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Office Square Footage:
        <div id="office_inputs_sum_sqft" class="red ui label">
          0
          <div class="detail">square feet</div>
          <input class="sqft_sum" type="hidden" value="0">
        </div>
      </h2>
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Office Cost:
        <div id="office_inputs_sum_costs" class="red ui label">
          0
          <div class="detail">USD</div>
          <input class="costs_sum" type="hidden" value="0">
        </div>
      </h2>
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Office Cost Per Square Foot:
        <div id="office_inputs_cost_per_sqft" class="red ui label">
          0
          <div class="detail">USD</div>
          <input class="cost_per_sqft" type="hidden" value="0">
        </div>
      </h2>
    </div>
    
    <!-- THE CUBICLES/WORKSTATIONS -->
    
    <h2 class="red ui dividing header">Cubicles / Work Stations</h2>
    <div class="ui internally celled grid">
      <div class="row ui">
        
        <div class="five wide column">
          <h3 class="grey ui dividing header">Supervisor 11x10</h3>
          <img class="ui fluid centered image" src="./assets/img/workstation-supervisor11x10.png">
        </div>
        
        <div class="five wide column">
          <h3 class="grey ui dividing header">Standard 8x6</h3>
          <img class="ui fluid centered image" src="./assets/img/workstation-standard8x6.png">
        </div>
        
        <div class="five wide column">
          <h3 class="grey ui dividing header">Small 6x6</h3>
          <img class="ui fluid centered image" src="./assets/img/workstation-small6x6.png">
        </div>
        
      </div>
      <div id="workstation_inputs" class="row">
        <div class="five wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="workstation_supervisor11x10" type="text" value="0">
            <input class="multiplier" type="hidden" value="110">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label" style="align: right">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="five wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="workstation_standard8x6" type="text" value="0">
            <input class="multiplier" type="hidden" value="48">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="five wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="workstation_small6x6" type="text" value="0">
            <input class="multiplier" type="hidden" value="36">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
      </div>
    </div>
    
    <div class="ui red segment" style="margin-bottom: 4em;">
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Cubicle / Work Station Total:
        <div id="workstation_inputs_sum" class="red ui label">
          0
          <div class="detail">square feet</div>
          <input class="sqft_sum" type="hidden" value="0">
        </div>
      </h2>
    </div>
    
    <!-- MEETING ROOMS -->
    
    <h2 class="red ui dividing header">Meeting Rooms</h2>
    <div class="ui internally celled grid">
      <div class="row ui">
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Boardroom 25x16</h3>
          <img class="ui fluid centered image" src="./assets/img/meeting-boardroom25x16.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Conference Room 20x15</h3>
          <img class="ui fluid centered image" src="./assets/img/meeting-conference20x15.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Meeting Room 15x10</h3>
          <img class="ui fluid centered image" src="./assets/img/meeting-small15x15.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Breakout Room 10x10</h3>
          <img class="ui fluid centered image" src="./assets/img/meeting-breakoutroom10x10.png">
        </div>
        
      </div>
      <div id="meeting_room_inputs" class="row">
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="meeting_boardroom25x16" type="text" value="0">
            <input class="multiplier" type="hidden" value="400">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="meeting_conference20x15" type="text" value="0">
            <input class="multiplier" type="hidden" value="300">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="meeting_small15x15" type="text" value="0">
            <input class="multiplier" type="hidden" value="225">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">  
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="meeting_breakoutroom10x10" type="text" value="0">
            <input class="multiplier" type="hidden" value="100">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
      </div>
    </div>
    
    <div class="ui red segment" style="margin-bottom: 4em;">
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Meeting Room Total:
        <div id="meeting_room_inputs_sum" class="red ui label">
          0
          <div class="detail">square feet</div>
          <input class="sqft_sum" type="hidden" value="0">
        </div>
      </h2>
    </div>
    
    <!-- Other Areas -->
    
    <h2 class="red ui dividing header">Other Areas</h2>
    <div class="ui internally celled grid">
      <div class="row ui">
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Reception 15x20</h3>
          <img class="ui fluid centered image" src="./assets/img/other-reception15x20.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Lunch Room 15x20</h3>
          <img class="ui fluid centered image" src="./assets/img/other-lunchroom15x20.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Coffee Bar 6x10</h3>
          <img class="ui fluid centered image" src="./assets/img/other-coffeebar6x10.png">
        </div>
        
        <div class="four wide column">
          <h3 class="grey ui dividing header">Server Room 5x5</h3>
          <img class="ui fluid centered image" src="./assets/img/other-serverroom5x5.png">
        </div>
        
      </div>
      <div id="other_areas_inputs" class="row">
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="other_reception15x20" type="text" value="0">
            <input class="multiplier" type="hidden" value="300">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="other_lunchroom15x20" type="text" value="0">
            <input class="multiplier" type="hidden" value="300">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="other_coffeebar6x10" type="text" value="0">
            <input class="multiplier" type="hidden" value="60">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
        <div class="four wide column block_entry">  
          <div class="inline field quantity">
            <label>Quantity:</label>
            <input class="quantity" id="other_serverroom5x5" type="text" value="0">
            <input class="multiplier" type="hidden" value="25">
            <input class="cost_per_unit" type="hidden" value="100"> <!-- This is the unit cost -->
          </div>
          <div class="red ui label block_label">
            Square Feet:
            <div class="detail">0</div>
            <input class="sqft_val" type="hidden" value="0">
          </div>
        </div>
        
      </div>
    </div>
    
    <div class="ui red segment" style="margin-bottom: 4em;">
      <h2 class="black ui header aligned right" style="margin-right: 8%;">Other Areas Total:
        <div id="other_areas_inputs_sum" class="red ui label">
          0
          <div class="detail">square feet</div>
          <input class="sqft_sum" type="hidden" value="0">
        </div>
      </h2>
    </div>
    
    
    <table class="ui inverted red table" style="margin-bottom: 4em;">
      <thead><tr id="subtotal">
          <th class="six wide"><h2>Subtotal</h2></th>
          <th class="calculated_value">0</th>
      </tr></thead>
      <tbody>
        <tr id="circulation">
          <td>Circulation:&nbsp&nbsp&nbsp&nbsp
            <div class="ui right labeled input">
              <input type="text" value="35" style="width: 48px;">
              <div class="ui basic label">%</div>
            </div>
          </td>
          <td class="calculated_value">0</td>
        </tr>
        <tr id="total_usable">
          <td>Usable Space:</td>
          <td class="calculated_value">0</td>
        </tr>
        <tr id="loss_factor">
          <td>Loss Factor:&nbsp&nbsp&nbsp&nbsp
            <div class="ui right labeled input">
              <input type="text" value="15" style="width: 48px;">
              <div class="ui basic label">%</div>
            </div>
          </td>
          <td class="calculated_value">0</td>
        </tr>
      </tbody>
      <tfoot>
        <tr id="rentable_square_feet">
          <th><h2>Rentable Square Feet</h2></th>
          <th class="calculated_value">0</th>
        </tr>
        <tr id="total_layout_cost">
          <th><h2>Total Cost:</h2></th>
          <th class="calculated_value">0</th>
        </tr>
      </tfoot>
    </table>
    
  </div>
  
</div>

<footer style="width: 110%;">  
  <div class="ui inverted red segment"><br>© 2018 Fast Office<br><br></div>
</footer>

<script>

let sectionIds = ['office_inputs', 'workstation_inputs', 'meeting_room_inputs', 'other_areas_inputs'];

function setSqftSums(sectionId) {
  
}

// Calculates the sum for each 
function setSectionSums(sectionId) {
  let sumSqft = 0;
  let sumCosts = 0;
  
  $('#' + sectionId).find('.block_entry').each( function() {
    let quantity = parseFloat($(this).find("input.quantity").val());
    let multiplier = parseFloat($(this).find("input.multiplier").val());
    let unitCost = parseFloat($(this).find("input.cost_per_unit").val());
    let sqft = 0;
    let cost = 0;
    if(!isNaN(quantity)) {
      sqft = quantity * multiplier;
      cost = quantity * unitCost;
    }
    $(this).find('.block_label.sqft').html(
      "Square Feet:<div class=\"detail\">" + sqft + "</div><input class=\"sqft_val\" type=\"hidden\" value=\"" + sqft + "\">"
    );
    $(this).find('.block_label.cost_units').html(
      "Cost:<div class=\"detail\">"+ cost + "</div><input class=\"cost_units_val\" type=\"hidden\" value=\"" + cost + "\">"
    );
    sumSqft = sumSqft + sqft;
    sumCosts = sumCosts + cost;    
  });
  
  $('#' + sectionId + '_sum_sqft').html(
      sumSqft + "<div class=\"detail\">square feet</div><input class=\"sqft_sum\" type=\"hidden\" value=\"" + sumSqft + "\">"
  );
  $('#' + sectionId + '_sum_costs').html(
      sumCosts + "<div class=\"detail\">USD</div><input class=\"costs_sum\" type=\"hidden\" value=\"" + sumCosts + "\">"
  );
  
  let cost_per_sqft = 0;
  if(sumSqft != 0) {
      cost_per_sqft = (sumSqft / sumCosts).toFixed(2);
  }
  $('#' + sectionId + '_cost_per_sqft').html(
    cost_per_sqft + "<div class=\"detail\">USD</div><input class=\"cost_per_sqft\" type=\"hidden\" value=\"" + cost_per_sqft + "\">"
  );
}

// Calculates the table with subtotal, circulation, RSF, etc.
function calculateTotals() {
  let subtotal = 0;
  $('input.sqft_sum').each( function() {
    input = parseFloat($(this).val());
    if(isNaN(input)) {
      input = 0;
    }
    subtotal = subtotal + input;
  });
  $('#subtotal th.calculated_value').html(subtotal); // set the subtotal in table.
  
  let circulationPercent = parseFloat($('#circulation input').val()) / 100;
  if(isNaN(circulationPercent)) {
    circulationPercent = 0;
  }
  let circulation = parseInt(circulationPercent * subtotal);
  $('#circulation td.calculated_value').html(circulation);
  
  let totalUsable = circulation + subtotal;
  $('#total_usable td.calculated_value').html(totalUsable);
  
  let lossPercent = parseFloat($('#loss_factor input').val()) / 100;
  if(isNaN(lossPercent)) {
    lossPercent = 0;
  }
  let loss = parseInt(lossPercent * totalUsable);
  $('#loss_factor td.calculated_value').html(loss);
  
  rentableSquareFeet = totalUsable + loss;
  $('#rentable_square_feet th.calculated_value').html(rentableSquareFeet);
  
  let costTotal = 0;
  $('input.costs_sum').each( function() {
    input = parseFloat($(this).val());
    if(isNaN(input)) {
      input = 0;
    }
    costTotal = costTotal + input;
  });
  $('#total_layout_cost th.calculated_value').html(costTotal);
  
}



$(document).ready( function() {
    $('#programme_wizard_form').on('keyup', 'input', function() {
        sectionIds.forEach(setSectionSums);
        calculateTotals();
    });
});


</script>
</body>

</html>
